# docker-compose.yml â€” for macOS, Windows, and Linux
#
# Usage:
#   docker compose up -d
#
# How it works:
#   The app uses SCAN_HOST to TCP-probe every port on "host.docker.internal",
#   the special hostname that resolves to the host machine's IP.
#   On Linux, Docker may require the extra_hosts entry below to resolve it.

services:
  localhost-explorer:
    image: ghcr.io/idohomri-io/localhost-explorer:latest
    pull_policy: always
    container_name: localhost-explorer
    restart: unless-stopped
    ports:
      - "80:80"
    extra_hosts:
      # Ensures host.docker.internal resolves on all platforms.
      # Docker Desktop defines it automatically; this entry makes it explicit.
      - "host.docker.internal:host-gateway"
    environment:
      - PYTHONUNBUFFERED=1
      # SCAN_HOST: activates TCP port-scan mode, probing the given hostname.
      - SCAN_HOST=host.docker.internal
      # HOST: hostname shown in browser-side service links.
      # Defaults to the machine's FQDN if not set.
      - HOST=localhost
